<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript" src="/eel.js"></script>
  </head>
  <body>
    <div class="overview">
      <div class="game">
        <div id="base-red" class="base-red" onClick="js_click_handler(this)"></div>
        <div id="base-green" class="base-green" onClick="js_click_handler(this)"></div>
        <div id="base-blue" class="base-blue" onClick="js_click_handler(this)"></div>
        <div id="base-yellow" class="base-yellow" onClick="js_click_handler(this)"></div>
        
        <div class="green biji" id="green-1" onClick="move(this)"></div>
        <div class="green biji" id="green-2" onClick="move(this)"></div>
        <div class="green biji" id="green-3" onClick="move(this)"></div>
        <div class="green biji" id="green-4" onClick="move(this)"></div>

        <div class="green biji" id="blue-1" onClick="move(this)"></div>
        <div class="green biji" id="blue-2" onClick="move(this)"></div>
        <div class="green biji" id="blue-3" onClick="move(this)"></div>
        <div class="green biji" id="blue-4" onClick="move(this)"></div>

        <div class="green biji" id="red-1" onClick="move(this)"></div>
        <div class="green biji" id="red-2" onClick="move(this)"></div>
        <div class="green biji" id="red-3" onClick="move(this)"></div>
        <div class="green biji" id="red-4" onClick="move(this)"></div>

        <div class="green biji" id="yellow-1" onClick="move(this)"></div>
        <div class="green biji" id="yellow-2" onClick="move(this)"></div>
        <div class="green biji" id="yellow-3" onClick="move(this)"></div>
        <div class="green biji" id="yellow-4" onClick="move(this)"></div>
      </div>

      <div class="dice">
        <div class="games">
          <div class="container">
            <div id="dice1" class="dice dice-one">
              <div id="dice-one-side-one" class="side one">
                <div class="dot one-1"></div>
              </div>
              <div id="dice-one-side-two" class="side two">
                <div class="dot two-1"></div>
                <div class="dot two-2"></div>
              </div>
              <div id="dice-one-side-three" class="side three">
                <div class="dot three-1"></div>
                <div class="dot three-2"></div>
                <div class="dot three-3"></div>
              </div>
              <div id="dice-one-side-four" class="side four">
                <div class="dot four-1"></div>
                <div class="dot four-2"></div>
                <div class="dot four-3"></div>
                <div class="dot four-4"></div>
              </div>
              <div id="dice-one-side-five" class="side five">
                <div class="dot five-1"></div>
                <div class="dot five-2"></div>
                <div class="dot five-3"></div>
                <div class="dot five-4"></div>
                <div class="dot five-5"></div>
              </div>
              <div id="dice-one-side-six" class="side six">
                <div class="dot six-1"></div>
                <div class="dot six-2"></div>
                <div class="dot six-3"></div>
                <div class="dot six-4"></div>
                <div class="dot six-5"></div>
                <div class="dot six-6"></div>
              </div>
            </div>
          </div>
          <div id="roll" class="roll-button"><button>Roll dice!</button></div>
        </div>
      </div>
    </div>
    <script src="script.js" async defer></script>
  </body>
</html>
<script>
    eel.expose(alert_func);
    function alert_func(a) {
        alert(a)
    }

    function js_click_handler(a) {
        console.log("test")
        console.log(a.id)
        eel.handle_click(a.id)
    }

    function out_from_base() {

    }
  function move(r) {
    eel.move(r.id)
  }
  eel.expose(move_troop)
  function move_troop(troop_id, movement) {
    var troop_id_var = troop_id
    console.log("msk")
    function move_func(value, index, array) {
      console.log(value)
      if(value == "up") {
        up(troop_id_var)
      } else if(value == "right") {
        right(troop_id_var)
      }
    }
    movement.forEach(move_func)
  }
  function start() {
    $("#green-1").css(
      {
        left: "115px",
        top: "483px",
      },
      2
    );
  }
  function set() {
    $("#green-1").css(
      {
        left: "292px",
        top: "582px",
      },
      2
    );
  }
  function up() {
    $("#" + r).animate(
      {
        top: "-=39px",
      },
      2
    );
  }
  function down(r) {
    $("#" + r).animate(
      {
        top: "+=39px",
      },
      2
    );
  }
  function left(r) {
    $("#" + r).animate(
      {
        left: "-=39px",
      },
      2
    );
  }
  function upleft(r) {
    $("#" + r).animate(
      {
        top: "-=53px",
        left: "-=51px",
      },
      2
    );
  }
  function downleft(r) {
    $("#" + r).animate(
      {
        top: "+=53px",
        left: "-=51px",
      },
      2
    );
  }
  function right(r) {
    $("#" + r).animate(
      {
        left: "+=39px",
      },
      2
    );
  }
  function rightup(r) {
    $("#" + r).animate(
      {
        top: "-=53px",
        left: "+=51px",
      },
      2
    );
  }
  function rightdown(r) {
    $("#" + r).animate(
      {
        top: "+=53px",
        left: "+=53px",
      },
      2
    );
  }

    // dice
    var elDiceOne       = document.getElementById('dice1');
    var elComeOut       = document.getElementById('roll');
    var lastDice = -1

    elComeOut.onclick   = function () {rollDice();};

    eel.expose(rollDice)
    async function rollDice() {
        console.log("msk rolldice")
        eel.put_command(6)
        const lena_kontol_memek_anjing = {
            1: 1,
            5: 2,
            6: 3,
            3: 4,
            4: 5,
            2: 6,
        }

        var diceOne = await eel.get_dice()()
        console.log(diceOne);
        diceOne = lena_kontol_memek_anjing[diceOne]
        if(diceOne === lastDice) {
            diceTemp = (diceOne * 3) % 7
            for (var i = 1; i <= 6; i++) {
                elDiceOne.classList.remove('show-' + i);
                if (diceTemp === i) {
                    elDiceOne.classList.add('show-' + i);
                }
            }
            for (var i = 1; i <= 6; i++) {
                elDiceOne.classList.remove('show-' + i);
                if (diceOne === i) {
                    elDiceOne.classList.add('show-' + i);
                }
            }
        } else {
            for (var i = 1; i <= 6; i++) {
                elDiceOne.classList.remove('show-' + i);
                if (diceOne === i) {
                    elDiceOne.classList.add('show-' + i);
                }
            }
        }
        lastDice = diceOne
        console.log(elDiceOne.classList)
    }
    // dice end

  eel.expose(startblue1)
  function startblue1(r) {
    $("#blue-1").animate(
      {
        top: "583px",
        left: "293px",
      },
      
    );
  }
  function startblue2(r) {
    $("#blue-2").animate(
      {
        top: "583px",
        left: "293px",
      },
    
    );
  }
  function startblue3(r) {
    $("#blue-3").animate(
      {
        top: "583px",
        left: "293px",
      },
      
    );
  }
  function startblue4(r) {
    $("#blue-4").animate(
      {
        top: "583px",
        left: "293px",
      },
      
    );
  }
  eel.expose(startred1)
  function startred1(r) {
    $("#red-1").animate(
      {
        top: "294px",
        left: "84px",
      },
      
    );
  }
  function startred2(r) {
    $("#red-2").animate(
      {
        top: "294px",
        left: "84px",
      },
      
    );
  }
  function startred3(r) {
    $("#red-3").animate(
      {
        top: "294px",
        left: "84px",
      },
      
    );
  }
  function startred4(r) {
    $("#red-4").animate(
      {
        top: "294px",
        left: "84px",
      },
      
    );
  }
  function startgreen1(r) {
    $("#green-1").animate(
      {
        top: "84px",
        left: "372px",
      },
      
    );
  }
  function startgreen2(r) {
    $("#green-2").animate(
      {
        top: "84px",
        left: "372px",
      },
      
    );
  }
  function startgreen3(r) {
    $("#green-3").animate(
      {
        top: "84px",
        left: "372px",
      },
      
    );
  }
  function startgreen4(r) {
    $("#green-4").animate(
      {
        top: "84px",
        left: "372px",
      },
      
    );
  }
  function startyellow1(r) {
    $("#yellow-1").animate(
      {
        top: "372px",
        left: "582px",
      },
      
    );
  }
  function startyellow2(r) {
    $("#yellow-2").animate(
      {
        top: "372px",
        left: "582px",
      },
      
    );
  }
  function startyellow3(r) {
    $("#yellow-3").animate(
      {
        top: "372px",
        left: "582px",
      },
      
    );
  }
  function startyellow4(r) {
    $("#yellow-4").animate(
      {
        top: "372px",
        left: "582px",
      },
      
    );
  }
</script>
